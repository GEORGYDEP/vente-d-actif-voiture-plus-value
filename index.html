<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Arte della Contabilit√† - Vente de Voiture (TVA 50%)</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=EB+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c9a227;
            --gold-light: #e8d5a3;
            --gold-dark: #8b7355;
            --parchment: #f4e4bc;
            --parchment-dark: #d4c4a8;
            --ink: #2c1810;
            --ink-light: #5c4033;
            --sepia: #704214;
            --red-ink: #8b0000;
            --green-ink: #006400;
            --blue-ink: #00008b;
            --purple-ink: #4b0082;
            --shadow: rgba(44, 24, 16, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'EB Garamond', serif;
            background: linear-gradient(135deg, #d4c4a8 0%, #f4e4bc 50%, #d4c4a8 100%);
            min-height: 100vh;
            color: var(--ink);
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* Header Style Renaissance */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(180deg, rgba(201, 162, 39, 0.1) 0%, transparent 100%);
            border-bottom: 3px double var(--gold);
            margin-bottom: 30px;
            position: relative;
        }

        header::before, header::after {
            content: 'üöó';
            font-size: 24px;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        header::before { left: 20px; }
        header::after { right: 20px; }

        .main-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            color: var(--sepia);
            text-shadow: 2px 2px 4px var(--shadow);
            letter-spacing: 0.1em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-size: 1.3rem;
            color: var(--ink-light);
            letter-spacing: 0.05em;
        }

        .special-badge {
            display: inline-block;
            background: linear-gradient(180deg, var(--purple-ink) 0%, #2d0047 100%);
            color: #fff;
            padding: 8px 25px;
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            margin-top: 15px;
            border-radius: 3px;
            box-shadow: 0 3px 10px var(--shadow);
        }

        .da-vinci-quote {
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-size: 1rem;
            color: var(--gold-dark);
            margin-top: 15px;
            padding: 10px 30px;
            border-left: 2px solid var(--gold);
            border-right: 2px solid var(--gold);
            display: inline-block;
        }

        /* Special TVA Alert Box */
        .tva-special-box {
            background: linear-gradient(135deg, rgba(75, 0, 130, 0.1) 0%, rgba(75, 0, 130, 0.2) 100%);
            border: 3px solid var(--purple-ink);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .tva-special-box::before {
            content: '‚ö†Ô∏è R√àGLE SP√âCIALE TVA - VOITURE';
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--purple-ink);
            color: #fff;
            padding: 5px 20px;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            border-radius: 3px;
        }

        .tva-special-box h3 {
            font-family: 'Cinzel', serif;
            color: var(--purple-ink);
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .tva-rule {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.7);
            border-left: 4px solid var(--purple-ink);
        }

        .tva-rule-icon {
            font-size: 2rem;
        }

        .tva-rule-content {
            flex: 1;
        }

        .tva-rule-title {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--purple-ink);
            margin-bottom: 5px;
        }

        .tva-formula {
            background: var(--purple-ink);
            color: #fff;
            padding: 10px 20px;
            display: inline-block;
            font-family: 'EB Garamond', serif;
            font-size: 1.2rem;
            margin-top: 10px;
            border-radius: 3px;
        }

        /* Navigation Niveaux */
        .nav-levels {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(201, 162, 39, 0.1) 50%, transparent 100%);
        }

        .nav-btn {
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            padding: 15px 30px;
            border: 2px solid var(--gold);
            background: linear-gradient(180deg, var(--parchment) 0%, var(--parchment-dark) 100%);
            color: var(--sepia);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(201, 162, 39, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover, .nav-btn.active {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 100%);
            color: var(--ink);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .nav-btn.active {
            border-width: 3px;
        }

        /* Panels */
        .level-panel {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .level-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards Style Parchemin */
        .card {
            background: linear-gradient(135deg, #f9f3e3 0%, var(--parchment) 50%, #f9f3e3 100%);
            border: 2px solid var(--gold-dark);
            border-radius: 5px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 
                0 5px 20px var(--shadow),
                inset 0 0 50px rgba(201, 162, 39, 0.05);
            position: relative;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px solid var(--gold-light);
            pointer-events: none;
        }

        .card-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--sepia);
            border-bottom: 2px solid var(--gold);
            padding-bottom: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-title .icon {
            font-size: 1.8rem;
        }

        /* Tables Renaissance */
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid var(--gold-dark);
        }

        th {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 100%);
            font-family: 'Cinzel', serif;
            font-weight: 600;
            color: var(--ink);
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.05em;
        }

        td {
            background: rgba(255, 255, 255, 0.5);
        }

        tr:nth-child(even) td {
            background: rgba(201, 162, 39, 0.1);
        }

        .amount {
            font-family: 'EB Garamond', serif;
            font-weight: 600;
            text-align: right;
        }

        .debit { color: var(--red-ink); }
        .credit { color: var(--green-ink); }
        .special { color: var(--purple-ink); font-weight: bold; }

        /* Facture Style */
        .invoice {
            background: #fff;
            border: 3px double var(--gold);
            padding: 40px;
            margin: 20px 0;
            position: relative;
        }

        .invoice::before {
            content: 'FACTURE';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--parchment);
            padding: 5px 30px;
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            color: var(--sepia);
            border: 2px solid var(--gold);
        }

        .invoice-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--gold-light);
        }

        .invoice-company {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            color: var(--sepia);
            margin-bottom: 10px;
        }

        .invoice-details {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .invoice-number {
            text-align: right;
            font-family: 'Cinzel', serif;
        }

        .invoice-total {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 100%);
            padding: 20px;
            text-align: right;
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--ink);
            margin-top: 20px;
        }

        /* Input Fields */
        .input-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .input-group label {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            min-width: 250px;
            color: var(--ink-light);
        }

        .input-field {
            flex: 1;
            min-width: 150px;
            padding: 12px 15px;
            border: 2px solid var(--gold-dark);
            background: rgba(255, 255, 255, 0.8);
            font-family: 'EB Garamond', serif;
            font-size: 1.1rem;
            color: var(--ink);
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(201, 162, 39, 0.3);
            background: #fff;
        }

        .input-field.correct {
            border-color: var(--green-ink);
            background: rgba(0, 100, 0, 0.05);
        }

        .input-field.incorrect {
            border-color: var(--red-ink);
            background: rgba(139, 0, 0, 0.05);
        }

        .input-field.special-input {
            border-color: var(--purple-ink);
            background: rgba(75, 0, 130, 0.05);
        }

        .unit {
            font-family: 'EB Garamond', serif;
            font-size: 1.1rem;
            color: var(--ink-light);
        }

        /* Buttons */
        .btn {
            font-family: 'Cinzel', serif;
            padding: 12px 30px;
            border: 2px solid var(--gold);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            margin: 10px 5px;
        }

        .btn-primary {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 100%);
            color: var(--ink);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .btn-secondary {
            background: transparent;
            color: var(--sepia);
        }

        .btn-secondary:hover {
            background: rgba(201, 162, 39, 0.2);
        }

        .btn-reveal {
            background: linear-gradient(180deg, #e8d5a3 0%, #c9a227 100%);
            color: var(--ink);
            position: relative;
            overflow: hidden;
        }

        .btn-reveal::after {
            content: 'üëÅÔ∏è';
            margin-left: 10px;
        }

        /* Result Display */
        .result-display {
            background: linear-gradient(135deg, rgba(201, 162, 39, 0.1) 0%, rgba(201, 162, 39, 0.2) 100%);
            border: 2px solid var(--gold);
            padding: 20px 30px;
            margin: 20px 0;
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            text-align: center;
        }

        .result-positive {
            color: var(--green-ink);
            border-color: var(--green-ink);
            background: linear-gradient(135deg, rgba(0, 100, 0, 0.05) 0%, rgba(0, 100, 0, 0.1) 100%);
        }

        .result-negative {
            color: var(--red-ink);
            border-color: var(--red-ink);
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.05) 0%, rgba(139, 0, 0, 0.1) 100%);
        }

        /* Etapes Indicator */
        .steps-indicator {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .step-dot {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--gold-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            background: var(--parchment);
            transition: all 0.3s ease;
        }

        .step-dot.active .step-number,
        .step-dot.completed .step-number {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 100%);
            border-color: var(--gold);
        }

        .step-dot.completed .step-number::after {
            content: '‚úì';
            color: var(--green-ink);
        }

        .step-label {
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.9rem;
            color: var(--ink-light);
            text-align: center;
            max-width: 100px;
        }

        /* Journal Entries */
        .journal-entry {
            margin: 20px 0;
        }

        .journal-header {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            background: linear-gradient(90deg, var(--gold-light), var(--gold), var(--gold-light));
            font-family: 'Cinzel', serif;
            margin-bottom: 0;
        }

        .journal-table {
            margin-top: 0;
        }

        .journal-table input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--gold-dark);
            background: rgba(255, 255, 255, 0.9);
            font-family: 'EB Garamond', serif;
            font-size: 1rem;
        }

        /* Accordion for reference */
        .accordion {
            margin: 20px 0;
        }

        .accordion-header {
            background: linear-gradient(180deg, var(--parchment-dark) 0%, var(--parchment) 100%);
            padding: 15px 20px;
            border: 2px solid var(--gold-dark);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Cinzel', serif;
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--parchment-dark) 100%);
        }

        .accordion-header .arrow {
            transition: transform 0.3s ease;
        }

        .accordion-header.open .arrow {
            transform: rotate(180deg);
        }

        .accordion-content {
            display: none;
            border: 2px solid var(--gold-dark);
            border-top: none;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
        }

        .accordion-content.open {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Feedback Messages */
        .feedback {
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            display: none;
        }

        .feedback.success {
            background: rgba(0, 100, 0, 0.1);
            border: 2px solid var(--green-ink);
            color: var(--green-ink);
            display: block;
        }

        .feedback.error {
            background: rgba(139, 0, 0, 0.1);
            border: 2px solid var(--red-ink);
            color: var(--red-ink);
            display: block;
        }

        /* Decorative Elements */
        .decorative-line {
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 30px 0;
        }

        .fleur-de-lis {
            text-align: center;
            font-size: 2rem;
            color: var(--gold);
            margin: 20px 0;
        }

        /* Highlight for special calculations */
        .highlight-purple {
            background: rgba(75, 0, 130, 0.1);
            border: 2px dashed var(--purple-ink);
            padding: 15px;
            margin: 10px 0;
        }

        .highlight-purple .label {
            color: var(--purple-ink);
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-title { font-size: 1.8rem; }
            .card { padding: 20px; }
            .invoice { padding: 20px; }
            .invoice-header { grid-template-columns: 1fr; }
            .input-group { flex-direction: column; align-items: stretch; }
            .input-group label { min-width: auto; }
            th, td { padding: 8px 10px; font-size: 0.9rem; }
        }

        /* Highlight animation */
        .highlight {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(75, 0, 130, 0.4); }
            50% { box-shadow: 0 0 20px 5px rgba(75, 0, 130, 0.6); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="main-title">L'Arte della Contabilit√†</h1>
            <p class="subtitle">Vente de Voiture ‚Äî Citro√´n C4</p>
            <div class="special-badge">üöó PARTICULARIT√â : TVA R√âCUP√âRABLE √Ä 50% SEULEMENT</div>
            <p class="da-vinci-quote">"La simplicit√© est la sophistication supr√™me" ‚Äî Leonardo da Vinci</p>
        </header>

        <!-- Encadr√© sp√©cial TVA Voiture -->
        <div class="tva-special-box">
            <h3>üìã R√®gles particuli√®res pour les voitures (PME)</h3>
            <div class="tva-rule">
                <div class="tva-rule-icon">üõí</div>
                <div class="tva-rule-content">
                    <div class="tva-rule-title">√Ä L'ACHAT : TVA r√©cup√©rable √† 50% maximum</div>
                    <p>Lors de l'achat d'une voiture, l'entreprise ne peut r√©cup√©rer que <strong>50% de la TVA</strong>. Les 50% non r√©cup√©rables s'ajoutent au co√ªt d'acquisition !</p>
                    <div class="tva-formula">Valeur d'acquisition = Prix HTVA + (TVA √ó 50%)</div>
                </div>
            </div>
            <div class="tva-rule">
                <div class="tva-rule-icon">üí∞</div>
                <div class="tva-rule-content">
                    <div class="tva-rule-title">√Ä LA VENTE : TVA calcul√©e sur 50% du prix de vente</div>
                    <p>Lors de la vente, la TVA √† facturer se calcule sur <strong>50% du prix de vente HTVA</strong> uniquement.</p>
                    <div class="tva-formula">TVA √† payer = Prix HTVA √ó 21% √ó 50%</div>
                </div>
            </div>
        </div>

        <nav class="nav-levels">
            <button class="nav-btn active" onclick="showLevel(1)">üìú Niveau I<br><small>L'√ânonc√©</small></button>
            <button class="nav-btn" onclick="showLevel(2)">üìã Niveau II<br><small>La Facture</small></button>
            <button class="nav-btn" onclick="showLevel(3)">‚úçÔ∏è Niveau III<br><small>Les √âtapes</small></button>
            <button class="nav-btn" onclick="showLevel(4)">üìñ Niveau IV<br><small>L'√âcriture</small></button>
        </nav>

        <!-- NIVEAU 1: L'√ânonc√© -->
        <section id="level1" class="level-panel active">
            <div class="card">
                <h2 class="card-title"><span class="icon">üìú</span> √ânonc√© de l'Exercice 2</h2>
                <div style="font-size: 1.15rem; line-height: 1.8;">
                    <p>Vous r√©alisez l'achat d'une voiture <strong>Citro√´n C4</strong> d'une valeur de <strong>20.000 ‚Ç¨</strong> le <strong>01/01/2025</strong> (TVA 21%).</p>
                    <br>
                    <div class="highlight-purple">
                        <p class="label">‚ö†Ô∏è Il s'agit d'une PME :</p>
                        <p>La TVA n'est r√©cup√©rable qu'√† <strong>50% maximum</strong> lors de l'achat d'une voiture.</p>
                        <p>Calcul de la valeur d'acquisition : 20.000 + (4.200 √ó 50%) = <strong>22.100 ‚Ç¨</strong></p>
                    </div>
                    <br>
                    <p><strong>Questions :</strong></p>
                    <p>a) Comptabilisez l'achat de la voiture.</p>
                    <p>b) √âtablissez le tableau d'amortissement et comptabilisez les amortissements. <br>
                       <em>Dur√©e de vie estim√©e : 4 ans en lin√©aire.</em></p>
                    <br>
                    <p>Le <strong>01/12/2027</strong>, vous vendez votre voiture pour une valeur de :</p>
                    <div class="result-display result-positive" style="margin: 20px 0;">
                        <strong>Hypoth√®se 1 : 15.000 ‚Ç¨ HTVA</strong>
                    </div>
                    <div class="highlight-purple">
                        <p class="label">‚ö†Ô∏è Particularit√© pour la vente :</p>
                        <p>Vous ne devez calculer que <strong>50% de la TVA</strong> sur votre facture de vente.</p>
                        <p>TVA = 21% √ó 50% √ó 15.000 ‚Ç¨ = <strong>1.575 ‚Ç¨</strong></p>
                    </div>
                    <br>
                    <p>c) Comptabilisez la vente de votre v√©hicule.</p>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><span class="icon">üìù</span> √âcriture d'Achat de la Voiture</h2>
                <div class="highlight-purple" style="margin-bottom: 20px;">
                    <p><strong>Calcul de la valeur d'acquisition :</strong></p>
                    <p>Prix HTVA : 20.000 ‚Ç¨</p>
                    <p>TVA totale (21%) : 4.200 ‚Ç¨</p>
                    <p>TVA r√©cup√©rable (50%) : 2.100 ‚Ç¨ ‚Üí compte 4110</p>
                    <p>TVA non r√©cup√©rable (50%) : 2.100 ‚Ç¨ ‚Üí <strong class="special">ajout√© √† la valeur du bien</strong></p>
                    <p><strong>Valeur comptable de la voiture : 20.000 + 2.100 = 22.100 ‚Ç¨</strong></p>
                </div>
                <div class="journal-entry">
                    <div class="journal-header">
                        <span>Journal : JA</span>
                        <span>Date : 01/01/2025</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Compte</th>
                                    <th>Libell√©</th>
                                    <th>D√©bit (‚Ç¨)</th>
                                    <th>Cr√©dit (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2410</td>
                                    <td>Voiture C4 <span class="special">(+50% TVA non r√©cup.)</span></td>
                                    <td class="amount debit">22.100,00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>4110</td>
                                    <td>TVA √† r√©cup√©rer <span class="special">(50% seulement)</span></td>
                                    <td class="amount debit">2.100,00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>4400</td>
                                    <td>Fournisseur</td>
                                    <td></td>
                                    <td class="amount credit">24.200,00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><span class="icon">üìä</span> Tableau d'Amortissement</h2>
                <p style="margin-bottom: 15px; font-style: italic; color: var(--ink-light);">
                    Amortissement lin√©aire sur 4 ans : <strong class="special">22.100</strong> / 4 = <strong>5.525 ‚Ç¨/an</strong><br>
                    <strong>1√®re ann√©e :</strong> Ann√©e compl√®te (achat le 01/01)
                </p>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ann√©e</th>
                                <th>Valeur d'acquisition</th>
                                <th>Amortissement</th>
                                <th>VCN (Valeur Comptable Nette)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2025</td>
                                <td class="amount special">22.100,00</td>
                                <td class="amount">5.525,00</td>
                                <td class="amount"><strong>16.575,00</strong></td>
                            </tr>
                            <tr>
                                <td>2026</td>
                                <td class="amount special">22.100,00</td>
                                <td class="amount">5.525,00</td>
                                <td class="amount"><strong>11.050,00</strong></td>
                            </tr>
                            <tr style="background: rgba(0, 100, 0, 0.1);">
                                <td>2027</td>
                                <td class="amount special">22.100,00</td>
                                <td class="amount">5.525,00</td>
                                <td class="amount"><strong>5.525,00</strong></td>
                            </tr>
                            <tr>
                                <td>2028</td>
                                <td class="amount special">22.100,00</td>
                                <td class="amount">5.525,00</td>
                                <td class="amount"><strong>0,00</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title"><span class="icon">üìñ</span> √âcritures d'Amortissement Comptabilis√©es</h2>
                
                <div class="journal-entry">
                    <div class="journal-header">
                        <span>Journal : JOD</span>
                        <span>Date : 31/12/2025</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Compte</th>
                                    <th>Libell√©</th>
                                    <th>D√©bit (‚Ç¨)</th>
                                    <th>Cr√©dit (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>6302</td>
                                    <td>Dotation d'amortissement s/IC</td>
                                    <td class="amount debit">5.525,00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>2419</td>
                                    <td>Amortissements act√©s sur voiture</td>
                                    <td></td>
                                    <td class="amount credit">5.525,00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="journal-entry" style="margin-top: 25px;">
                    <div class="journal-header">
                        <span>Journal : JOD</span>
                        <span>Date : 31/12/2026</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Compte</th>
                                    <th>Libell√©</th>
                                    <th>D√©bit (‚Ç¨)</th>
                                    <th>Cr√©dit (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>6302</td>
                                    <td>Dotation d'amortissement s/IC</td>
                                    <td class="amount debit">5.525,00</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>2419</td>
                                    <td>Amortissements act√©s sur voiture</td>
                                    <td></td>
                                    <td class="amount credit">5.525,00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="fleur-de-lis">‚öú</div>
            </div>
        </section>

        <!-- NIVEAU 2: La Facture -->
        <section id="level2" class="level-panel">
            <div class="card">
                <h2 class="card-title"><span class="icon">üìã</span> Facture de Vente de la Voiture</h2>
                
                <div class="highlight-purple" style="margin-bottom: 20px;">
                    <p class="label">‚ö†Ô∏è ATTENTION - R√®gle sp√©ciale TVA pour la vente d'une voiture :</p>
                    <p>Puisque nous n'avons pu r√©cup√©rer que 50% de la TVA lors de l'achat, la TVA sur la facture de vente se calcule √©galement sur <strong>50% du prix de vente HTVA</strong>.</p>
                    <p><strong>TVA = 21% √ó 50% √ó 15.000 ‚Ç¨ = 1.575 ‚Ç¨</strong></p>
                </div>
                
                <div class="invoice">
                    <div class="invoice-header">
                        <div>
                            <p class="invoice-company">VOTRE ENTREPRISE SRL</p>
                            <div class="invoice-details">
                                Rue de l'Industrie, 45<br>
                                6000 Charleroi<br>
                                TVA : BE 0123.456.789
                            </div>
                        </div>
                        <div class="invoice-number">
                            <p style="font-size: 1.5rem; margin-bottom: 10px;">FACTURE</p>
                            <p><strong>N¬∞ :</strong> 2027/VT/002</p>
                            <p><strong>Date :</strong> 01/12/2027</p>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <p style="font-weight: 600; margin-bottom: 10px;">FACTUR√â √Ä :</p>
                        <div class="invoice-details">
                            <strong>GARAGE CENTRAL SPRL</strong><br>
                            Chauss√©e de Bruxelles, 234<br>
                            7100 La Louvi√®re<br>
                            TVA : BE 0876.543.210
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Description</th>
                                    <th>D√©tails</th>
                                    <th style="text-align: right;">Montant (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="3" style="background: var(--parchment-dark); font-weight: 600;">
                                        VENTE DE V√âHICULE - ACTIF IMMOBILIS√â
                                    </td>
                                </tr>
                                <tr>
                                    <td><strong>Voiture Citro√´n C4</strong></td>
                                    <td>
                                        V√©hicule de tourisme<br>
                                        <small>Acquisition : 01/01/2025</small><br>
                                        <small>Immatriculation : 1-XYZ-789</small><br>
                                        <small>Kilom√©trage : 85.000 km</small>
                                    </td>
                                    <td class="amount">15.000,00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="margin-top: 30px; text-align: right;">
                        <table style="width: auto; margin-left: auto;">
                            <tr>
                                <td style="text-align: right; padding-right: 30px;"><strong>Montant HTVA :</strong></td>
                                <td class="amount" style="min-width: 150px;">15.000,00 ‚Ç¨</td>
                            </tr>
                            <tr style="background: rgba(75, 0, 130, 0.1);">
                                <td style="text-align: right; padding-right: 30px;"><strong class="special">TVA 21% √ó 50% :</strong></td>
                                <td class="amount special">1.575,00 ‚Ç¨</td>
                            </tr>
                        </table>
                    </div>

                    <div class="invoice-total">
                        TOTAL TVAC : 16.575,00 ‚Ç¨
                    </div>

                    <div style="margin-top: 30px; font-size: 0.9rem; color: var(--ink-light);">
                        <p><strong>Conditions de paiement :</strong> 30 jours fin de mois</p>
                        <p><strong>IBAN :</strong> BE12 3456 7890 1234</p>
                        <p style="margin-top: 15px; font-style: italic; color: var(--purple-ink);">
                            ‚ö†Ô∏è <strong>TVA r√©duite :</strong> Conform√©ment √† la l√©gislation belge, la TVA sur la vente d'un v√©hicule 
                            pour lequel la TVA n'a √©t√© r√©cup√©rable qu'√† 50% lors de l'achat est calcul√©e sur 50% du prix de vente.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Accord√©on pour voir le niveau 1 -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>üìú Consulter le Niveau I - L'√ânonc√© et le Tableau d'Amortissement</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="accordion-content" id="accordion-level1">
                    <p style="margin-bottom: 15px;"><strong>Rappel de l'√©nonc√© :</strong></p>
                    <p>Achat voiture Citro√´n C4 le 01/01/2025 : 20.000 ‚Ç¨ HTVA</p>
                    <p><span class="special">Valeur comptable : 22.100 ‚Ç¨ (TVA 50% non r√©cup. incluse)</span></p>
                    <p>Vente le 01/12/2027 : 15.000 ‚Ç¨ HTVA (Hypoth√®se 1)</p>
                    <p>Amortissement lin√©aire sur 4 ans : 5.525 ‚Ç¨/an</p>
                    <div class="decorative-line"></div>
                    <p><strong>Amortissements d√©j√† comptabilis√©s :</strong></p>
                    <p>‚Ä¢ 2025 : 5.525,00 ‚Ç¨</p>
                    <p>‚Ä¢ 2026 : 5.525,00 ‚Ç¨</p>
                    <p><strong>Total au 31/12/2026 : 11.050,00 ‚Ç¨</strong></p>
                </div>
            </div>
        </section>

        <!-- NIVEAU 3: Les √âtapes -->
        <section id="level3" class="level-panel">
            <div class="steps-indicator">
                <div class="step-dot active" onclick="showStep(1)">
                    <div class="step-number">1</div>
                    <span class="step-label">√âl√©ments de la facture</span>
                </div>
                <div class="step-dot" onclick="showStep(2)">
                    <div class="step-number">2</div>
                    <span class="step-label">VCN & Dernier amort.</span>
                </div>
                <div class="step-dot" onclick="showStep(3)">
                    <div class="step-number">3</div>
                    <span class="step-label">R√©sultat de vente</span>
                </div>
            </div>

            <!-- √âtape 1 -->
            <div id="step1" class="step-content">
                <div class="card">
                    <h2 class="card-title"><span class="icon">1Ô∏è‚É£</span> √âtape 1 : D√©terminer les √©l√©ments de la facture de vente</h2>
                    
                    <div class="highlight-purple" style="margin-bottom: 20px;">
                        <p class="label">‚ö†Ô∏è N'oubliez pas la r√®gle sp√©ciale !</p>
                        <p>TVA = Prix HTVA √ó 21% √ó <strong>50%</strong></p>
                    </div>
                    
                    <p style="margin-bottom: 20px; color: var(--ink-light); font-style: italic;">
                        Compl√©tez les montants de la facture de vente. Le prix de vente est de <strong>15.000 ‚Ç¨ HTVA</strong>.
                    </p>

                    <div class="input-group">
                        <label for="step1-htva">Montant HTVA :</label>
                        <input type="text" id="step1-htva" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group">
                        <label for="step1-tva" class="special">Montant TVA (21% √ó 50%) :</label>
                        <input type="text" id="step1-tva" class="input-field special-input highlight" placeholder="Attention : TVA √† 50% !">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group">
                        <label for="step1-tvac">Montant TVAC :</label>
                        <input type="text" id="step1-tvac" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="checkStep1()">‚úì V√©rifier mes r√©ponses</button>
                        <button class="btn btn-reveal" onclick="revealStep1()">Voir les r√©ponses</button>
                    </div>

                    <div id="feedback-step1" class="feedback"></div>

                    <div id="result-step1" style="display: none;" class="result-display">
                        <p><strong>R√©capitulatif :</strong></p>
                        <p>15.000,00 ‚Ç¨ HTVA</p>
                        <p style="border-bottom: 1px solid var(--purple-ink); display: inline-block; color: var(--purple-ink);">+ 1.575,00 ‚Ç¨ TVA (21% √ó 50%)</p>
                        <p style="font-size: 1.5rem; margin-top: 10px;"><strong>= 16.575,00 ‚Ç¨ TVAC</strong></p>
                    </div>
                </div>
            </div>

            <!-- √âtape 2 -->
            <div id="step2" class="step-content" style="display: none;">
                <div class="card">
                    <h2 class="card-title"><span class="icon">2Ô∏è‚É£</span> √âtape 2 : D√©terminer la Valeur Comptable Nette (VCN)</h2>
                    <p style="margin-bottom: 20px; color: var(--ink-light); font-style: italic;">
                        Calculez la VCN au jour de la vente (01/12/2027). N'oubliez pas l'amortissement de l'ann√©e 2027 !<br>
                        <strong>Attention :</strong> On ne prend pas le jour de la vente. Du 01/01 au 30/11 = 334 jours.
                    </p>
                    
                    <div class="highlight-purple" style="margin-bottom: 20px;">
                        <p class="label">üìå Rappel important :</p>
                        <p>La valeur d'acquisition est de <strong>22.100 ‚Ç¨</strong> (et non 20.000 ‚Ç¨) car elle inclut les 50% de TVA non r√©cup√©rable !</p>
                    </div>

                    <div class="input-group">
                        <label for="step2-val-acq" class="special">Valeur d'acquisition (avec TVA non r√©cup.) :</label>
                        <input type="text" id="step2-val-acq" class="input-field special-input" placeholder="Attention : inclut 50% TVA !">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group">
                        <label for="step2-amort-2025">Amortissement 2025 :</label>
                        <input type="text" id="step2-amort-2025" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group">
                        <label for="step2-amort-2026">Amortissement 2026 :</label>
                        <input type="text" id="step2-amort-2026" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group highlight">
                        <label for="step2-amort-2027">Amortissement 2027 (prorata 334 jours) :</label>
                        <input type="text" id="step2-amort-2027" class="input-field" placeholder="334 jours sur 365...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <p style="font-size: 0.9rem; color: var(--ink-light); margin: 10px 0;">
                        üí° Calcul prorata 2027 : 5.525 √ó 334 / 365 = ?
                    </p>

                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="checkStep2()">‚úì V√©rifier mes r√©ponses</button>
                        <button class="btn btn-reveal" onclick="revealStep2()">Voir les r√©ponses</button>
                    </div>

                    <div id="feedback-step2" class="feedback"></div>

                    <div id="result-step2" style="display: none;">
                        <div class="result-display">
                            <p><strong>Calcul de la VCN au 01/12/2027 :</strong></p>
                            <p>Valeur d'acquisition : <span class="special">22.100,00 ‚Ç¨</span></p>
                            <p>- Amort. 2025 : 5.525,00 ‚Ç¨</p>
                            <p>- Amort. 2026 : 5.525,00 ‚Ç¨</p>
                            <p style="border-bottom: 1px solid var(--gold); display: inline-block;">- Amort. 2027 : 5.055,75 ‚Ç¨</p>
                            <p style="font-size: 1.3rem; margin-top: 10px;">Total amortissements : <strong>16.105,75 ‚Ç¨</strong></p>
                            <p style="font-size: 1.5rem; margin-top: 10px; color: var(--sepia);"><strong>VCN = 5.994,25 ‚Ç¨</strong></p>
                        </div>

                        <div class="card" style="margin-top: 20px;">
                            <h3 style="font-family: 'Cinzel', serif; margin-bottom: 15px;">üìù Derni√®re √©criture d'amortissement √† passer</h3>
                            <div class="journal-entry">
                                <div class="journal-header">
                                    <span>Journal : JOD</span>
                                    <span>Date : 01/12/2027</span>
                                </div>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Compte</th>
                                                <th>Libell√©</th>
                                                <th>D√©bit (‚Ç¨)</th>
                                                <th>Cr√©dit (‚Ç¨)</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>6302</td>
                                                <td>Dotation d'amortissement s/IC</td>
                                                <td class="amount debit">5.055,75</td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>2419</td>
                                                <td>Amortissements act√©s sur voiture</td>
                                                <td></td>
                                                <td class="amount credit">5.055,75</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- √âtape 3 -->
            <div id="step3" class="step-content" style="display: none;">
                <div class="card">
                    <h2 class="card-title"><span class="icon">3Ô∏è‚É£</span> √âtape 3 : D√©terminer le r√©sultat de la vente</h2>
                    <p style="margin-bottom: 20px; color: var(--ink-light); font-style: italic;">
                        Comparez le prix de vente avec la VCN pour d√©terminer s'il y a une plus-value ou une moins-value.
                    </p>

                    <div class="input-group">
                        <label for="step3-pv">Prix de Vente (HTVA) :</label>
                        <input type="text" id="step3-pv" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div class="input-group">
                        <label for="step3-vcn">Valeur Comptable Nette :</label>
                        <input type="text" id="step3-vcn" class="input-field" placeholder="Entrez le montant...">
                        <span class="unit">‚Ç¨</span>
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="checkStep3()">‚úì V√©rifier mes r√©ponses</button>
                        <button class="btn btn-reveal" onclick="revealStep3()">Voir les r√©ponses</button>
                    </div>

                    <div id="feedback-step3" class="feedback"></div>

                    <div id="result-step3" style="display: none;">
                        <div class="result-display result-positive">
                            <p><strong>Calcul du r√©sultat :</strong></p>
                            <p>Prix de Vente : 15.000,00 ‚Ç¨</p>
                            <p style="border-bottom: 1px solid var(--green-ink); display: inline-block;">- VCN : 5.994,25 ‚Ç¨</p>
                            <p style="font-size: 1.8rem; margin-top: 15px;">
                                <strong>= + 9.005,75 ‚Ç¨</strong>
                            </p>
                            <p style="font-size: 1.3rem; margin-top: 10px;">
                                üéâ <strong>PLUS-VALUE DE R√âALISATION</strong><br>
                                <small>(Soit un PROFIT sur la vente de la voiture !)</small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accord√©ons de r√©f√©rence -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>üìú Consulter le Niveau I - Tableau d'Amortissement</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Ann√©e</th>
                                    <th>Amortissement</th>
                                    <th>VCN</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>2025</td><td>5.525,00 ‚Ç¨</td><td>16.575,00 ‚Ç¨</td></tr>
                                <tr><td>2026</td><td>5.525,00 ‚Ç¨</td><td>11.050,00 ‚Ç¨</td></tr>
                                <tr style="background: rgba(0, 100, 0, 0.2);"><td>2027</td><td>5.055,75 ‚Ç¨ (prorata)</td><td>5.994,25 ‚Ç¨</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <p class="special" style="margin-top: 10px;">Rappel : Valeur d'acquisition = 22.100 ‚Ç¨ (inclut 50% TVA non r√©cup.)</p>
                </div>
            </div>

            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>üìã Consulter le Niveau II - Facture de Vente</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p><strong>Facture N¬∞ 2027/VT/002</strong> - Date : 01/12/2027</p>
                    <p>Vente de la voiture Citro√´n C4 :</p>
                    <p>‚Ä¢ HTVA : 15.000,00 ‚Ç¨</p>
                    <p class="special">‚Ä¢ TVA 21% √ó 50% : 1.575,00 ‚Ç¨</p>
                    <p>‚Ä¢ <strong>TVAC : 16.575,00 ‚Ç¨</strong></p>
                </div>
            </div>
        </section>

        <!-- NIVEAU 4: L'√âcriture -->
        <section id="level4" class="level-panel">
            <div class="card">
                <h2 class="card-title"><span class="icon">üìñ</span> Niveau IV : Comptabiliser l'√©criture de vente</h2>
                <p style="margin-bottom: 20px; color: var(--ink-light); font-style: italic;">
                    Compl√©tez l'√©criture de vente dans le Journal des Ventes.<br>
                    <strong>Rappel :</strong> Les d√©bits = Les cr√©dits
                </p>
                
                <div class="highlight-purple" style="margin-bottom: 20px;">
                    <p class="label">üìå Points cl√©s √† retenir :</p>
                    <p>‚Ä¢ Valeur de la voiture (2410) : <strong>22.100 ‚Ç¨</strong> (et non 20.000 ‚Ç¨)</p>
                    <p>‚Ä¢ TVA √† payer (4510) : <strong>1.575 ‚Ç¨</strong> (21% √ó 50%)</p>
                    <p>‚Ä¢ Amortissements act√©s (2419) : <strong>16.105,75 ‚Ç¨</strong></p>
                    <p>‚Ä¢ Plus-value (7630) : <strong>9.005,75 ‚Ç¨</strong></p>
                </div>

                <div class="journal-entry">
                    <div class="journal-header">
                        <span>Journal : JV (Ventes)</span>
                        <span>Date : 01/12/2027</span>
                    </div>
                    <div class="table-container">
                        <table class="journal-table">
                            <thead>
                                <tr>
                                    <th style="width: 15%;">Compte</th>
                                    <th style="width: 35%;">Libell√©</th>
                                    <th style="width: 25%;">D√©bit (‚Ç¨)</th>
                                    <th style="width: 25%;">Cr√©dit (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="text" id="j-compte1" placeholder="N¬∞ compte"></td>
                                    <td><input type="text" id="j-libelle1" placeholder="Libell√©"></td>
                                    <td><input type="text" id="j-debit1" placeholder="D√©bit"></td>
                                    <td><input type="text" id="j-credit1" placeholder="Cr√©dit"></td>
                                </tr>
                                <tr>
                                    <td><input type="text" id="j-compte2" placeholder="N¬∞ compte"></td>
                                    <td><input type="text" id="j-libelle2" placeholder="Libell√©"></td>
                                    <td><input type="text" id="j-debit2" placeholder="D√©bit"></td>
                                    <td><input type="text" id="j-credit2" placeholder="Cr√©dit"></td>
                                </tr>
                                <tr>
                                    <td><input type="text" id="j-compte3" placeholder="N¬∞ compte"></td>
                                    <td><input type="text" id="j-libelle3" placeholder="Libell√©"></td>
                                    <td><input type="text" id="j-debit3" placeholder="D√©bit"></td>
                                    <td><input type="text" id="j-credit3" placeholder="Cr√©dit"></td>
                                </tr>
                                <tr>
                                    <td><input type="text" id="j-compte4" placeholder="N¬∞ compte"></td>
                                    <td><input type="text" id="j-libelle4" placeholder="Libell√©"></td>
                                    <td><input type="text" id="j-debit4" placeholder="D√©bit"></td>
                                    <td><input type="text" id="j-credit4" placeholder="Cr√©dit"></td>
                                </tr>
                                <tr>
                                    <td><input type="text" id="j-compte5" placeholder="N¬∞ compte"></td>
                                    <td><input type="text" id="j-libelle5" placeholder="Libell√©"></td>
                                    <td><input type="text" id="j-debit5" placeholder="D√©bit"></td>
                                    <td><input type="text" id="j-credit5" placeholder="Cr√©dit"></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr style="background: var(--gold-light);">
                                    <td colspan="2" style="text-align: right; font-weight: bold;">TOTAUX :</td>
                                    <td id="total-debit" class="amount" style="font-weight: bold;">0,00</td>
                                    <td id="total-credit" class="amount" style="font-weight: bold;">0,00</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="calculateTotals()">üî¢ Calculer les totaux</button>
                    <button class="btn btn-primary" onclick="checkJournal()">‚úì V√©rifier mon √©criture</button>
                    <button class="btn btn-reveal" onclick="revealJournal()">Voir la correction</button>
                </div>

                <div id="feedback-journal" class="feedback"></div>
            </div>

            <!-- Correction -->
            <div id="correction-journal" class="card" style="display: none;">
                <h2 class="card-title"><span class="icon">‚úÖ</span> Correction - √âcriture de Vente (Plus-value)</h2>
                
                <div class="journal-entry">
                    <div class="journal-header">
                        <span>Journal : JV</span>
                        <span>Date : 01/12/2027</span>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Compte</th>
                                    <th>Libell√©</th>
                                    <th>D√©bit (‚Ç¨)</th>
                                    <th>Cr√©dit (‚Ç¨)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>4000</strong></td>
                                    <td>Client</td>
                                    <td class="amount debit"><strong>16.575,00</strong></td>
                                    <td></td>
                                </tr>
                                <tr style="background: rgba(75, 0, 130, 0.1);">
                                    <td><strong class="special">4510</strong></td>
                                    <td class="special">TVA √† payer (21% √ó 50%)</td>
                                    <td></td>
                                    <td class="amount credit special"><strong>1.575,00</strong></td>
                                </tr>
                                <tr style="background: rgba(75, 0, 130, 0.1);">
                                    <td><strong class="special">2410</strong></td>
                                    <td class="special">Voiture (valeur + 50% TVA non r√©cup.)</td>
                                    <td></td>
                                    <td class="amount credit special"><strong>22.100,00</strong></td>
                                </tr>
                                <tr>
                                    <td><strong>2419</strong></td>
                                    <td>Amortissements act√©s s/voiture</td>
                                    <td class="amount debit"><strong>16.105,75</strong></td>
                                    <td></td>
                                </tr>
                                <tr style="background: rgba(0, 100, 0, 0.1);">
                                    <td><strong style="color: var(--green-ink);">7630</strong></td>
                                    <td><strong style="color: var(--green-ink);">Plus-value de r√©alisation</strong></td>
                                    <td></td>
                                    <td class="amount credit"><strong style="color: var(--green-ink);">9.005,75</strong></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr style="background: var(--gold-light);">
                                    <td colspan="2" style="text-align: right; font-weight: bold;">TOTAUX :</td>
                                    <td class="amount" style="font-weight: bold;">32.680,75</td>
                                    <td class="amount" style="font-weight: bold;">32.680,75</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 20px; background: rgba(0, 100, 0, 0.1); border: 2px solid var(--green-ink);">
                    <h3 style="font-family: 'Cinzel', serif; color: var(--green-ink); margin-bottom: 15px;">üìö Explication de l'√©criture</h3>
                    <p><strong>D√âBITS :</strong></p>
                    <p>‚Ä¢ <strong>4000 Client</strong> : Montant TVAC de la facture (16.575 ‚Ç¨) - C'est notre cr√©ance</p>
                    <p>‚Ä¢ <strong>2419 Amort. act√©s</strong> : On "vide" le compte des amortissements (16.105,75 ‚Ç¨)</p>
                    <br>
                    <p><strong>CR√âDITS :</strong></p>
                    <p>‚Ä¢ <strong class="special">4510 TVA √† payer</strong> : TVA collect√©e sur la vente (<strong>1.575 ‚Ç¨</strong> = 21% √ó 50% √ó 15.000)</p>
                    <p>‚Ä¢ <strong class="special">2410 Voiture</strong> : On "sort" le bien √† sa valeur d'origine (<strong>22.100 ‚Ç¨</strong> incluant 50% TVA non r√©cup.)</p>
                    <p>‚Ä¢ <strong style="color: var(--green-ink);">7630 Plus-value</strong> : Le b√©n√©fice r√©alis√© sur la vente (9.005,75 ‚Ç¨)</p>
                </div>

                <div class="highlight-purple" style="margin-top: 20px;">
                    <h3 style="font-family: 'Cinzel', serif; color: var(--purple-ink); margin-bottom: 15px;">üöó R√©capitulatif des particularit√©s "Voiture"</h3>
                    <p><strong>√Ä l'achat :</strong> TVA r√©cup√©rable √† 50% seulement ‚Üí La partie non r√©cup√©rable (2.100 ‚Ç¨) s'ajoute au co√ªt d'acquisition</p>
                    <p><strong>√Ä la vente :</strong> TVA calcul√©e sur 50% du prix de vente ‚Üí TVA = 15.000 √ó 21% √ó 50% = 1.575 ‚Ç¨</p>
                    <p><strong>Valeur du bien :</strong> 22.100 ‚Ç¨ (et non 20.000 ‚Ç¨)</p>
                </div>
            </div>

            <!-- Accord√©ons de r√©f√©rence -->
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>üìä R√©capitulatif des 3 √©tapes</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p><strong>√âtape 1 - Facture :</strong></p>
                    <p>HTVA : 15.000 ‚Ç¨ | <span class="special">TVA (21%√ó50%) : 1.575 ‚Ç¨</span> | TVAC : 16.575 ‚Ç¨</p>
                    <div class="decorative-line"></div>
                    <p><strong>√âtape 2 - VCN au 01/12/2027 :</strong></p>
                    <p>Val. acquisition : <span class="special">22.100 ‚Ç¨</span> - Amortissements : 16.105,75 ‚Ç¨ = <strong>VCN : 5.994,25 ‚Ç¨</strong></p>
                    <div class="decorative-line"></div>
                    <p><strong>√âtape 3 - R√©sultat :</strong></p>
                    <p style="color: var(--green-ink);">PV (15.000) - VCN (5.994,25) = <strong>Plus-value : 9.005,75 ‚Ç¨</strong></p>
                </div>
            </div>

            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>üìñ Aide-m√©moire : Comptes √† utiliser</span>
                    <span class="arrow">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <table>
                        <tr><td><strong>2410</strong></td><td>Mat√©riel roulant (Voiture) - <span class="special">Valeur incluant 50% TVA non r√©cup.</span></td></tr>
                        <tr><td><strong>2419</strong></td><td>Amortissements act√©s sur mat√©riel roulant</td></tr>
                        <tr><td><strong>4000</strong></td><td>Clients</td></tr>
                        <tr><td><strong>4510</strong></td><td>TVA √† payer - <span class="special">21% √ó 50% du prix de vente</span></td></tr>
                        <tr><td><strong>6630</strong></td><td>Moins-value de r√©alisation (perte)</td></tr>
                        <tr style="background: rgba(0, 100, 0, 0.15);"><td><strong style="color: var(--green-ink);">7630</strong></td><td><strong style="color: var(--green-ink);">Plus-value de r√©alisation (profit) ‚Äî Au cr√©dit</strong></td></tr>
                    </table>
                </div>
            </div>
        </section>

        <footer style="text-align: center; padding: 40px 20px; margin-top: 40px; border-top: 3px double var(--gold);">
            <div class="fleur-de-lis">üöó ‚öú üöó</div>
            <p style="font-family: 'Cormorant Garamond', serif; font-style: italic; font-size: 1.1rem; color: var(--ink-light);">
                "L'apprentissage est le seul tr√©sor qui suit son ma√Ætre partout"
            </p>
            <p style="font-size: 0.9rem; color: var(--gold-dark); margin-top: 15px;">
                Application p√©dagogique ‚Äî Comptabilit√© 6·µâ ann√©e secondaire technique<br>
                <strong style="color: var(--purple-ink);">Exercice 2 : Vente de Voiture avec TVA √† 50%</strong>
            </p>
        </footer>
    </div>

    <script>
        // Valeurs correctes pour la VOITURE
        const CORRECT_VALUES = {
            step1: {
                htva: 15000,
                tva: 1575,      // 15000 √ó 21% √ó 50%
                tvac: 16575
            },
            step2: {
                valAcq: 22100,  // 20000 + 2100 (50% TVA non r√©cup.)
                amort2025: 5525,
                amort2026: 5525,
                amort2027: 5055.75,  // 5525 √ó 334/365
                vcn: 5994.25
            },
            step3: {
                pv: 15000,
                vcn: 5994.25,
                resultat: 9005.75
            },
            journal: {
                totalDebit: 32680.75,
                totalCredit: 32680.75
            }
        };

        // Navigation entre niveaux
        function showLevel(level) {
            document.querySelectorAll('.level-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById('level' + level).classList.add('active');
            document.querySelectorAll('.nav-btn')[level - 1].classList.add('active');
        }

        // Navigation entre √©tapes (niveau 3)
        function showStep(step) {
            document.querySelectorAll('.step-content').forEach(content => {
                content.style.display = 'none';
            });
            document.querySelectorAll('.step-dot').forEach(dot => {
                dot.classList.remove('active');
            });
            
            document.getElementById('step' + step).style.display = 'block';
            document.querySelectorAll('.step-dot')[step - 1].classList.add('active');
        }

        // Toggle accordion
        function toggleAccordion(header) {
            header.classList.toggle('open');
            const content = header.nextElementSibling;
            content.classList.toggle('open');
        }

        // Parse number from input
        function parseNumber(value) {
            if (!value) return NaN;
            value = value.replace(/\s/g, '').replace(',', '.').replace('‚Ç¨', '');
            return parseFloat(value);
        }

        // Check if values are approximately equal
        function isApproxEqual(a, b, tolerance = 1) {
            return Math.abs(a - b) <= tolerance;
        }

        // Format number
        function formatNumber(num) {
            return num.toLocaleString('fr-BE', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // √âtape 1 - V√©rification
        function checkStep1() {
            const htva = parseNumber(document.getElementById('step1-htva').value);
            const tva = parseNumber(document.getElementById('step1-tva').value);
            const tvac = parseNumber(document.getElementById('step1-tvac').value);
            
            let correct = 0;
            let total = 3;
            
            const htvaField = document.getElementById('step1-htva');
            const tvaField = document.getElementById('step1-tva');
            const tvacField = document.getElementById('step1-tvac');
            
            if (isApproxEqual(htva, CORRECT_VALUES.step1.htva)) {
                htvaField.classList.add('correct');
                htvaField.classList.remove('incorrect');
                correct++;
            } else {
                htvaField.classList.add('incorrect');
                htvaField.classList.remove('correct');
            }
            
            if (isApproxEqual(tva, CORRECT_VALUES.step1.tva)) {
                tvaField.classList.add('correct');
                tvaField.classList.remove('incorrect');
                correct++;
            } else {
                tvaField.classList.add('incorrect');
                tvaField.classList.remove('correct');
            }
            
            if (isApproxEqual(tvac, CORRECT_VALUES.step1.tvac)) {
                tvacField.classList.add('correct');
                tvacField.classList.remove('incorrect');
                correct++;
            } else {
                tvacField.classList.add('incorrect');
                tvacField.classList.remove('correct');
            }
            
            const feedback = document.getElementById('feedback-step1');
            if (correct === total) {
                feedback.className = 'feedback success';
                feedback.innerHTML = 'üéâ Excellent ! Vous avez bien appliqu√© la r√®gle des 50% de TVA !';
                document.getElementById('result-step1').style.display = 'block';
                document.querySelectorAll('.step-dot')[0].classList.add('completed');
            } else {
                feedback.className = 'feedback error';
                feedback.innerHTML = `‚ö†Ô∏è ${correct}/${total} r√©ponses correctes. N'oubliez pas : TVA = 21% √ó 50% √ó Prix HTVA !`;
            }
        }

        function revealStep1() {
            document.getElementById('step1-htva').value = formatNumber(CORRECT_VALUES.step1.htva);
            document.getElementById('step1-tva').value = formatNumber(CORRECT_VALUES.step1.tva);
            document.getElementById('step1-tvac').value = formatNumber(CORRECT_VALUES.step1.tvac);
            document.getElementById('result-step1').style.display = 'block';
            document.querySelectorAll('.step-dot')[0].classList.add('completed');
            
            ['step1-htva', 'step1-tva', 'step1-tvac'].forEach(id => {
                document.getElementById(id).classList.add('correct');
                document.getElementById(id).classList.remove('incorrect');
            });
        }

        // √âtape 2 - V√©rification
        function checkStep2() {
            const valAcq = parseNumber(document.getElementById('step2-val-acq').value);
            const amort2025 = parseNumber(document.getElementById('step2-amort-2025').value);
            const amort2026 = parseNumber(document.getElementById('step2-amort-2026').value);
            const amort2027 = parseNumber(document.getElementById('step2-amort-2027').value);
            
            let correct = 0;
            let total = 4;
            
            const fields = [
                { id: 'step2-val-acq', expected: CORRECT_VALUES.step2.valAcq },
                { id: 'step2-amort-2025', expected: CORRECT_VALUES.step2.amort2025 },
                { id: 'step2-amort-2026', expected: CORRECT_VALUES.step2.amort2026 },
                { id: 'step2-amort-2027', expected: CORRECT_VALUES.step2.amort2027 }
            ];
            
            fields.forEach(field => {
                const el = document.getElementById(field.id);
                const value = parseNumber(el.value);
                if (isApproxEqual(value, field.expected, 1)) {
                    el.classList.add('correct');
                    el.classList.remove('incorrect');
                    correct++;
                } else {
                    el.classList.add('incorrect');
                    el.classList.remove('correct');
                }
            });
            
            const feedback = document.getElementById('feedback-step2');
            if (correct === total) {
                feedback.className = 'feedback success';
                feedback.innerHTML = 'üéâ Parfait ! Vous avez bien compris que la valeur d\'acquisition inclut 50% de TVA !';
                document.getElementById('result-step2').style.display = 'block';
                document.querySelectorAll('.step-dot')[1].classList.add('completed');
            } else {
                feedback.className = 'feedback error';
                feedback.innerHTML = `‚ö†Ô∏è ${correct}/${total} r√©ponses correctes. Rappel : Valeur d'acquisition = 22.100 ‚Ç¨ (avec 50% TVA non r√©cup.) !`;
            }
        }

        function revealStep2() {
            document.getElementById('step2-val-acq').value = formatNumber(CORRECT_VALUES.step2.valAcq);
            document.getElementById('step2-amort-2025').value = formatNumber(CORRECT_VALUES.step2.amort2025);
            document.getElementById('step2-amort-2026').value = formatNumber(CORRECT_VALUES.step2.amort2026);
            document.getElementById('step2-amort-2027').value = formatNumber(CORRECT_VALUES.step2.amort2027);
            document.getElementById('result-step2').style.display = 'block';
            document.querySelectorAll('.step-dot')[1].classList.add('completed');
            
            ['step2-val-acq', 'step2-amort-2025', 'step2-amort-2026', 'step2-amort-2027'].forEach(id => {
                document.getElementById(id).classList.add('correct');
                document.getElementById(id).classList.remove('incorrect');
            });
        }

        // √âtape 3 - V√©rification
        function checkStep3() {
            const pv = parseNumber(document.getElementById('step3-pv').value);
            const vcn = parseNumber(document.getElementById('step3-vcn').value);
            
            let correct = 0;
            let total = 2;
            
            const pvField = document.getElementById('step3-pv');
            const vcnField = document.getElementById('step3-vcn');
            
            if (isApproxEqual(pv, CORRECT_VALUES.step3.pv)) {
                pvField.classList.add('correct');
                pvField.classList.remove('incorrect');
                correct++;
            } else {
                pvField.classList.add('incorrect');
                pvField.classList.remove('correct');
            }
            
            if (isApproxEqual(vcn, CORRECT_VALUES.step3.vcn, 1)) {
                vcnField.classList.add('correct');
                vcnField.classList.remove('incorrect');
                correct++;
            } else {
                vcnField.classList.add('incorrect');
                vcnField.classList.remove('correct');
            }
            
            const feedback = document.getElementById('feedback-step3');
            if (correct === total) {
                feedback.className = 'feedback success';
                feedback.innerHTML = 'üéâ Bravo ! Vous avez bien compris le calcul du r√©sultat !';
                document.getElementById('result-step3').style.display = 'block';
                document.querySelectorAll('.step-dot')[2].classList.add('completed');
            } else {
                feedback.className = 'feedback error';
                feedback.innerHTML = `‚ö†Ô∏è ${correct}/${total} r√©ponses correctes. V√©rifiez les champs en rouge.`;
            }
        }

        function revealStep3() {
            document.getElementById('step3-pv').value = formatNumber(CORRECT_VALUES.step3.pv);
            document.getElementById('step3-vcn').value = formatNumber(CORRECT_VALUES.step3.vcn);
            document.getElementById('result-step3').style.display = 'block';
            document.querySelectorAll('.step-dot')[2].classList.add('completed');
            
            ['step3-pv', 'step3-vcn'].forEach(id => {
                document.getElementById(id).classList.add('correct');
                document.getElementById(id).classList.remove('incorrect');
            });
        }

        // Journal - Calcul des totaux
        function calculateTotals() {
            let totalDebit = 0;
            let totalCredit = 0;
            
            for (let i = 1; i <= 5; i++) {
                const debit = parseNumber(document.getElementById('j-debit' + i).value);
                const credit = parseNumber(document.getElementById('j-credit' + i).value);
                
                if (!isNaN(debit)) totalDebit += debit;
                if (!isNaN(credit)) totalCredit += credit;
            }
            
            document.getElementById('total-debit').textContent = formatNumber(totalDebit);
            document.getElementById('total-credit').textContent = formatNumber(totalCredit);
        }

        // Journal - V√©rification
        function checkJournal() {
            calculateTotals();
            
            const totalDebit = parseNumber(document.getElementById('total-debit').textContent);
            const totalCredit = parseNumber(document.getElementById('total-credit').textContent);
            
            const feedback = document.getElementById('feedback-journal');
            
            if (isApproxEqual(totalDebit, totalCredit, 1) && 
                isApproxEqual(totalDebit, CORRECT_VALUES.journal.totalDebit, 1)) {
                feedback.className = 'feedback success';
                feedback.innerHTML = 'üéâ F√©licitations ! Votre √©criture est √©quilibr√©e et correcte ! Consultez la correction pour v√©rifier les d√©tails.';
                document.getElementById('correction-journal').style.display = 'block';
            } else if (isApproxEqual(totalDebit, totalCredit, 1)) {
                feedback.className = 'feedback error';
                feedback.innerHTML = '‚ö†Ô∏è Votre √©criture est √©quilibr√©e mais les montants ne sont pas corrects. V√©rifiez vos calculs (TVA √† 50%, valeur de 22.100 ‚Ç¨).';
            } else {
                feedback.className = 'feedback error';
                feedback.innerHTML = '‚ö†Ô∏è Attention ! Les d√©bits (' + formatNumber(totalDebit) + ' ‚Ç¨) ne sont pas √©gaux aux cr√©dits (' + formatNumber(totalCredit) + ' ‚Ç¨).';
            }
        }

        function revealJournal() {
            // Remplir les champs avec la correction
            document.getElementById('j-compte1').value = '4000';
            document.getElementById('j-libelle1').value = 'Client';
            document.getElementById('j-debit1').value = '16575';
            document.getElementById('j-credit1').value = '';
            
            document.getElementById('j-compte2').value = '4510';
            document.getElementById('j-libelle2').value = 'TVA √† payer (21%√ó50%)';
            document.getElementById('j-debit2').value = '';
            document.getElementById('j-credit2').value = '1575';
            
            document.getElementById('j-compte3').value = '2410';
            document.getElementById('j-libelle3').value = 'Voiture (+50% TVA)';
            document.getElementById('j-debit3').value = '';
            document.getElementById('j-credit3').value = '22100';
            
            document.getElementById('j-compte4').value = '2419';
            document.getElementById('j-libelle4').value = 'Amort. act√©s s/voiture';
            document.getElementById('j-debit4').value = '16105.75';
            document.getElementById('j-credit4').value = '';
            
            document.getElementById('j-compte5').value = '7630';
            document.getElementById('j-libelle5').value = 'Plus-value de r√©alisation';
            document.getElementById('j-debit5').value = '';
            document.getElementById('j-credit5').value = '9005.75';
            
            calculateTotals();
            document.getElementById('correction-journal').style.display = 'block';
        }

        // Event listeners for input fields
        document.querySelectorAll('.journal-table input').forEach(input => {
            input.addEventListener('input', calculateTotals);
        });
    </script>
</body>
</html>
